# porkbun-api-bash
Bash script to automate common tasks using the porkbun API.

Requires jq 1.6+ for JSON parsing and manipulation.

## Commands
### update-dns
Updates the DNS A record for a given domain to your current public IPv4 address.

Your current public IPv4 address is obtained using the porkbun API's ping endpoint.
If the A record for the specified domain already matches your public IP it will not be updated.

### retrieve-ssl
Retrieves the wildcard SSL cert bundle generated by porkbun for a given domain.
By default, this command writes 5 files to a specified destination folder:
- (domain name).fullchain.pem
- (domain name).intermediate.pem
- (domain name).privatekey.pem
- (domain name).publickey.pem
- (domain name).p12

### ping
Makes an API call to the porkbun API "ping" endpoint.
Can be helpful for confirming your API credentials are configured correctly and you are able to make API calls.

### custom \<endpoint> [data]
Make a custom API call to a specified endpoint with (optional) JSON data. The endpoint should be a string including everything after `https://porkbun.com/api/json/v3/` in the URL. Data should be provided as a string in JSON format, though leading and trailing braces may be omitted. Example data formatting: `'"content": "1.1.1.1", "ttl": "600"'`. If this command is called with no arguments an API call can be forumlated through an interactive dialog.

## Configuration
All variables can be configured within config file `porkbun-api.conf` located in the same directory as the script. A different config file can be specified with flag `-c /path/to/config`.

The configuration file will be sourced/executed by the script when called, so it is recommended to give it the same permissions as the parent script. Details on what configurable variables do are documented in `porkbun-api.conf`.

Some variables can also be set via flags when calling the script. Any variables set via flags will take precedence over variables set in the config file. More usage details are available by calling the script with the `-h` (help) flag.
